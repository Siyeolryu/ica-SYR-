# 개발일지: 대시보드 주가 차트 확인 및 개선

## 작성시각
2025년 12월 12일

## 해결하고자 한 문제
대시보드에 주가 차트가 제대로 표시되는지 확인하고, 필요하다면 개선하고 싶었습니다. 사용자가 요청한 요구사항을 모두 만족하는지 확인하고, 차트가 제대로 작동하는지 검증하고 싶었습니다.

## 해결된 것

### 1. 차트 구현 상태 확인
- `StockChart` 컴포넌트가 이미 구현되어 있음을 확인했습니다
- 모든 요구사항을 만족하고 있습니다:
  - ✅ 최근 5일간 주가 추이 라인 차트
  - ✅ 거래량 바 차트 (하단)
  - ✅ 차트 라이브러리: recharts 사용
  - ✅ 목업 데이터 사용
  - ✅ 상승/하락에 따른 색상 변경 (녹색/빨간색)

### 2. 대시보드 통합 확인
- `pages/index.tsx`에서 `topStock`에 대해 `isLarge` prop을 전달하고 있어 차트가 표시됩니다
- `StockCard` 컴포넌트에서 `isLarge`일 때만 차트를 표시하도록 구현되어 있습니다
- 차트는 "오늘의 화제 종목" 섹션의 첫 번째 카드(TOP 1 종목)에 표시됩니다

### 3. 차트 기능 확인
- 주가 라인 차트: 최근 5일간의 주식 가격을 선으로 연결하여 표시
- 거래량 바 차트: 각 날짜별 거래량을 막대 그래프로 표시 (하단)
- 색상 변경: 상승 시 녹색(#10b981), 하락 시 빨간색(#ef4444)
- 툴팁: 마우스 오버 시 정확한 가격과 거래량 표시
- 반응형: 화면 크기에 따라 자동 조정

### 4. 목업 데이터 확인
- `lib/mockData.ts`의 `getStockPriceHistory()` 함수가 5일간의 주가 데이터를 생성합니다
- 현재 가격을 기준으로 5일 전부터 오늘까지의 가격을 시뮬레이션합니다
- 거래량도 함께 시뮬레이션됩니다

## 해결되지 않은 것

### 1. 실제 주가 데이터 연동
- 현재는 목업 데이터만 사용하고 있습니다
- 향후 실제 Yahoo Finance API에서 가져온 데이터를 사용해야 합니다

### 2. 더 긴 기간 차트
- 현재는 5일만 표시됩니다
- 향후 1주일, 1개월, 1년 등 기간을 선택할 수 있는 기능이 필요합니다

### 3. 여러 종목 비교
- 현재는 한 종목의 차트만 표시됩니다
- 향후 여러 종목을 한 차트에 비교해서 볼 수 있는 기능이 필요합니다

### 4. 차트 상세 기능
- 줌 인/아웃 기능이 없습니다
- 차트를 클릭해서 더 자세히 볼 수 있는 기능이 없습니다

### 5. 실시간 업데이트
- 현재는 한 번 그려지면 그대로입니다
- 향후 주식 가격이 바뀌면 차트도 자동으로 업데이트되게 해야 합니다

## 향후 개발을 위한 컨텍스트

### 현재 구현 상태
- 차트는 이미 완전히 구현되어 있고, 모든 요구사항을 만족합니다
- 대시보드에서 TOP 1 종목에 차트가 표시됩니다
- 차트는 `StockCard` 컴포넌트 내부에 통합되어 있습니다

### 사용한 기술
- **recharts**: React용 차트 라이브러리 (v2.10.3)
- **ComposedChart**: 라인 차트와 바 차트를 함께 그릴 수 있는 차트
- **동적 import**: Next.js에서 서버 사이드 렌더링 문제를 피하기 위해 사용

### 파일 구조
```
components/
├── StockChart.tsx    # 차트 컴포넌트 (이미 구현됨)
└── StockCard.tsx     # 주식 카드 (차트 통합됨)

lib/
└── mockData.ts       # 주가 히스토리 데이터 함수 (이미 구현됨)

pages/
└── index.tsx         # 대시보드 (차트 표시됨)
```

### 차트 데이터 구조
```typescript
interface StockPriceData {
  date: string;      // 날짜 (예: "2024-01-15")
  price: number;     // 주가
  volume: number;    // 거래량
}
```

### 차트 표시 조건
- `isLarge={true}`인 `StockCard`에만 차트가 표시됩니다
- 메인 대시보드의 TOP 1 종목에만 차트가 보입니다
- 작은 카드들에는 차트가 표시되지 않습니다 (공간 절약)

### 색상 규칙
- **상승 (changePercent >= 0)**: 녹색 (#10b981)
- **하락 (changePercent < 0)**: 빨간색 (#ef4444)
- 라인 차트와 바 차트 모두 같은 색상 규칙을 사용합니다

### 차트 구성
- **주가 라인 차트**: 왼쪽 Y축에 표시, 녹색/빨간색 선
- **거래량 바 차트**: 오른쪽 Y축에 표시, 반투명 녹색/빨간색 막대
- **X축**: 날짜 (MM/DD 형식)
- **툴팁**: 마우스 오버 시 가격과 거래량 표시

### 다음 단계
1. **실제 데이터 연동** (최우선)
   - Yahoo Finance API에서 실제 주가 히스토리 가져오기
   - 백엔드에서 데이터를 가져와서 차트에 표시하기

2. **기간 선택 기능**
   - 5일, 1주일, 1개월, 3개월, 1년 선택 버튼 추가
   - 선택한 기간에 맞게 차트 데이터 업데이트

3. **차트 개선**
   - 더 예쁜 디자인
   - 애니메이션 효과
   - 줌 기능

4. **성능 최적화**
   - 많은 데이터를 효율적으로 처리
   - 차트 렌더링 속도 개선

### 참고사항
- recharts는 클라이언트 사이드에서만 렌더링되므로 `dynamic import`를 사용했습니다
- 차트 높이는 300px로 고정되어 있습니다 (나중에 조정 가능)
- 거래량은 오른쪽 Y축에 표시되고, 주가는 왼쪽 Y축에 표시됩니다
- 차트는 반응형으로 구현되어 있어 화면 크기에 따라 자동 조정됩니다

### 결론
차트는 이미 완전히 구현되어 있고, 모든 요구사항을 만족합니다. 대시보드에서 TOP 1 종목에 차트가 표시되며, 주가 추이와 거래량을 한눈에 볼 수 있습니다. 향후 실제 데이터 연동과 추가 기능 개발이 필요합니다.

