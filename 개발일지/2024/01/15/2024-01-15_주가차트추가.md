# 개발일지: 주가 차트 추가

## 작성시각
2024년 1월 15일

## 해결하고자 한 문제
대시보드에 주식 가격이 어떻게 변했는지 한눈에 볼 수 있는 차트를 추가하고 싶었어요. 마치 게임에서 캐릭터의 레벨이 올라가는 그래프를 보는 것처럼, 주식 가격이 올라가는지 내려가는지 그래프로 보고 싶었습니다.

## 해결된 것

### 1. 차트 라이브러리 설치
- `recharts`라는 차트 라이브러리를 설치했어요
- 이 라이브러리는 React에서 예쁜 차트를 쉽게 만들 수 있게 해줘요

### 2. 주가 차트 컴포넌트 만들기
- `components/StockChart.tsx` 파일을 만들었어요
- 이 컴포넌트는 두 가지 차트를 보여줘요:
  - **라인 차트**: 주식 가격이 어떻게 변했는지 선으로 보여줘요 (최근 5일)
  - **바 차트**: 거래량을 막대 그래프로 보여줘요 (하단에 표시)

### 3. 색깔 자동 변경
- 주식이 올랐으면 초록색으로, 내렸으면 빨간색으로 차트가 표시돼요
- 라인 차트와 바 차트 모두 색깔이 바뀌어요

### 4. 목업 데이터 추가
- `lib/mockData.ts`에 5일간의 주가 데이터를 만드는 함수를 추가했어요
- `getStockPriceHistory()` 함수가 가짜 주가 데이터를 만들어줘요
- 현재 가격을 기준으로 5일 전부터 오늘까지의 가격을 시뮬레이션해요

### 5. StockCard에 차트 추가
- 큰 카드(`isLarge={true}`)일 때만 차트가 보여요
- 작은 카드에는 차트가 안 보여요 (공간이 부족하니까요)
- 차트는 주식 정보 아래에 표시돼요

### 6. 차트 기능
- **주가 라인**: 최근 5일간의 주식 가격을 선으로 연결해서 보여줘요
- **거래량 바**: 각 날짜별로 거래량을 막대 그래프로 보여줘요
- **마우스 올리기**: 차트 위에 마우스를 올리면 그 날짜의 정확한 가격과 거래량을 보여줘요
- **반응형**: 화면 크기가 작아져도 차트가 잘 보여요

## 해결되지 않은 것

### 1. 실제 주가 데이터 연동
- 지금은 가짜 데이터(목업)만 사용해요
- 나중에 실제 Yahoo Finance에서 가져온 데이터를 사용해야 해요

### 2. 더 긴 기간 차트
- 지금은 5일만 보여줘요
- 나중에 1주일, 1개월, 1년 등 기간을 선택할 수 있게 해야 해요

### 3. 여러 종목 비교
- 지금은 한 종목의 차트만 보여줘요
- 나중에 여러 종목을 한 차트에 비교해서 볼 수 있게 해야 해요

### 4. 차트 상세 기능
- 줌 인/아웃 기능이 없어요
- 차트를 클릭해서 더 자세히 볼 수 있는 기능이 없어요

### 5. 실시간 업데이트
- 지금은 한 번 그려지면 그대로예요
- 나중에 주식 가격이 바뀌면 차트도 자동으로 업데이트되게 해야 해요

## 향후 개발을 위한 컨텍스트

### 사용한 기술
- **recharts**: React용 차트 라이브러리
- **ComposedChart**: 라인 차트와 바 차트를 함께 그릴 수 있는 차트
- **동적 import**: Next.js에서 서버 사이드 렌더링 문제를 피하기 위해 사용

### 파일 구조
```
components/
├── StockChart.tsx    # 차트 컴포넌트 (새로 만듦)
└── StockCard.tsx     # 주식 카드 (차트 추가함)

lib/
└── mockData.ts       # 주가 히스토리 데이터 함수 추가
```

### 차트 데이터 구조
```typescript
interface StockPriceData {
  date: string;      // 날짜 (예: "2024-01-15")
  price: number;     // 주가
  volume: number;    // 거래량
}
```

### 차트 표시 조건
- `isLarge={true}`인 StockCard에만 차트가 표시돼요
- 메인 대시보드의 TOP 1 종목에만 차트가 보여요
- 작은 카드들에는 차트가 안 보여요 (공간 절약)

### 색깔 규칙
- **상승 (changePercent >= 0)**: 초록색 (#10b981)
- **하락 (changePercent < 0)**: 빨간색 (#ef4444)
- 라인 차트와 바 차트 모두 같은 색깔 규칙을 사용해요

### 다음 단계
1. **실제 데이터 연동** (최우선)
   - Yahoo Finance API에서 실제 주가 히스토리 가져오기
   - 백엔드에서 데이터를 가져와서 차트에 표시하기

2. **기간 선택 기능**
   - 5일, 1주일, 1개월, 3개월, 1년 선택 버튼 추가
   - 선택한 기간에 맞게 차트 데이터 업데이트

3. **차트 개선**
   - 더 예쁜 디자인
   - 애니메이션 효과
   - 줌 기능

4. **성능 최적화**
   - 많은 데이터를 효율적으로 처리
   - 차트 렌더링 속도 개선

### 참고사항
- recharts는 클라이언트 사이드에서만 렌더링되므로 `dynamic import`를 사용했어요
- 차트 높이는 300px로 고정했어요 (나중에 조정 가능)
- 거래량은 오른쪽 Y축에 표시되고, 주가는 왼쪽 Y축에 표시돼요

### 쉽게 설명하면
차트를 추가한 것은 마치 "성적표에 그래프를 그리는 것"과 같아요.
- **라인 차트**: 시험 점수가 어떻게 변했는지 선으로 보여줘요
- **바 차트**: 공부한 시간을 막대 그래프로 보여줘요
- **색깔**: 점수가 올랐으면 초록색, 내렸으면 빨간색으로 표시해요

이제 주식 카드를 보면 가격이 어떻게 변했는지 한눈에 알 수 있어요!










