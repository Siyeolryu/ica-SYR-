# GitHub Actions ì¼ì¼ ë¸Œë¦¬í•‘ ì›Œí¬í”Œë¡œìš° ì„¤ì • ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025ë…„ 12ì›” 26ì¼
**ì›Œí¬í”Œë¡œìš° íŒŒì¼**: [.github/workflows/daily_briefing.yml](.github/workflows/daily_briefing.yml)

---

## ğŸ“‹ ê°œìš”

GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ ë§¤ì¼ í•œêµ­ì‹œê°„ ì˜¤ì „ 7ì‹œì— ìë™ìœ¼ë¡œ ë¯¸êµ­ ì£¼ì‹ ë¸Œë¦¬í•‘ì„ ìƒì„±í•˜ê³  ë°œì†¡í•˜ëŠ” ì›Œí¬í”Œë¡œìš°ì…ë‹ˆë‹¤.

**ì‹¤í–‰ ì‹œê°„**: ë§¤ì¼ ì˜¤ì „ 7ì‹œ (KST) = UTC 22:00

---

## âš™ï¸ ì›Œí¬í”Œë¡œìš° êµ¬ì„±

### ì‹¤í–‰ íŠ¸ë¦¬ê±°

```yaml
on:
  schedule:
    - cron: '0 22 * * *'  # UTC 22:00 = KST 07:00
  workflow_dispatch:       # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥
```

**Cron í‘œí˜„ì‹ ì„¤ëª…**:
- `0 22 * * *` = ë§¤ì¼ UTC 22:00 (í•œêµ­ì‹œê°„ ë‹¤ìŒë‚  07:00)
- `workflow_dispatch` = GitHub UIì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥ (í…ŒìŠ¤íŠ¸ìš©)

### ì‹¤í–‰ ë‹¨ê³„

1. âœ… **ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ** - ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
2. âœ… **Python 3.12 ì„¤ì •** - Python í™˜ê²½ êµ¬ì„±
3. âœ… **ì˜ì¡´ì„± ì„¤ì¹˜** - `pip install -r requirements.txt`
4. âœ… **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •** - GitHub Secretsì—ì„œ API í‚¤ ë¡œë“œ
5. âœ… **í™”ì œ ì¢…ëª© ì¡°íšŒ** - Yahoo Financeì—ì„œ TOP 5 ì¢…ëª© ìˆ˜ì§‘
6. âœ… **ë¸Œë¦¬í•‘ ìƒì„±** - Gemini AIë¡œ í…ìŠ¤íŠ¸ ë° ì´ë¯¸ì§€ ìƒì„±
7. âœ… **ë¸Œë¦¬í•‘ ë°œì†¡** - Slack + Email ë°œì†¡
8. âœ… **ì•„í‹°íŒ©íŠ¸ ì—…ë¡œë“œ** - ìƒì„±ëœ ì´ë¯¸ì§€/JSON íŒŒì¼ ë³´ê´€ (7ì¼ê°„)
9. âœ… **ì‹¤í–‰ ê²°ê³¼ ì•Œë¦¼** - ì„±ê³µ/ì‹¤íŒ¨ ìƒíƒœ ì¶œë ¥

---

## ğŸ” í•„ìˆ˜ ì„¤ì •: GitHub Secrets

ì›Œí¬í”Œë¡œìš°ê°€ ë™ì‘í•˜ë ¤ë©´ GitHub ì €ì¥ì†Œì— ë‹¤ìŒ Secretsë¥¼ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤.

### Secrets ë“±ë¡ ë°©ë²•

1. GitHub ì €ì¥ì†Œ í˜ì´ì§€ ì´ë™
2. **Settings** > **Secrets and variables** > **Actions** í´ë¦­
3. **New repository secret** ë²„íŠ¼ í´ë¦­
4. ì•„ë˜ í‘œì˜ ê° Secretì„ ì¶”ê°€

### ë“±ë¡í•´ì•¼ í•  Secrets

| Secret ì´ë¦„ | ì„¤ëª… | ì˜ˆì‹œ |
|------------|------|------|
| `GEMINI_API_KEY` | Google Gemini API í‚¤ | `AIzaSy...` |
| `EXA_API_KEY` | Exa ë‰´ìŠ¤ ê²€ìƒ‰ API í‚¤ | `exa_...` |
| `SLACK_WEBHOOK_URL` | Slack ì›¹í›… URL | `https://hooks.slack.com/...` |
| `EMAIL_SMTP_SERVER` | SMTP ì„œë²„ ì£¼ì†Œ | `smtp.gmail.com` |
| `EMAIL_SMTP_PORT` | SMTP í¬íŠ¸ | `587` |
| `EMAIL_SENDER` | ë°œì‹ ì ì´ë©”ì¼ | `your-email@gmail.com` |
| `EMAIL_PASSWORD` | ì´ë©”ì¼ ì•± ë¹„ë°€ë²ˆí˜¸ | `abcd efgh ijkl mnop` |
| `EMAIL_RECIPIENTS` | ìˆ˜ì‹ ì ì´ë©”ì¼ (ì‰¼í‘œ êµ¬ë¶„) | `user1@example.com,user2@example.com` |

### Gmail ì•± ë¹„ë°€ë²ˆí˜¸ ìƒì„± ë°©ë²•

Gmailì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:

1. Google ê³„ì • ì„¤ì • í˜ì´ì§€: https://myaccount.google.com/
2. **ë³´ì•ˆ** > **2ë‹¨ê³„ ì¸ì¦** í™œì„±í™”
3. **ì•± ë¹„ë°€ë²ˆí˜¸** ìƒì„±
4. ìƒì„±ëœ 16ìë¦¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ `EMAIL_PASSWORD`ì— ë“±ë¡

---

## ğŸš€ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ë°©ë²•

### 1. ìë™ ì‹¤í–‰ (ìŠ¤ì¼€ì¤„)

ì„¤ì • ì™„ë£Œ í›„ **ë§¤ì¼ ì˜¤ì „ 7ì‹œ(KST)**ì— ìë™ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### 2. ìˆ˜ë™ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸)

**GitHub UIì—ì„œ ì‹¤í–‰**:
1. ì €ì¥ì†Œ í˜ì´ì§€ ì´ë™
2. **Actions** íƒ­ í´ë¦­
3. ì¢Œì¸¡ì—ì„œ **"Daily Stock Briefing"** ì„ íƒ
4. **Run workflow** ë²„íŠ¼ í´ë¦­
5. **Run workflow** í™•ì¸

**ì‹¤í–‰ ê²°ê³¼ í™•ì¸**:
- Actions íƒ­ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì›Œí¬í”Œë¡œìš° í´ë¦­
- ê° ë‹¨ê³„ë³„ ë¡œê·¸ í™•ì¸ ê°€ëŠ¥
- ì„±ê³µ ì‹œ ë…¹ìƒ‰ ì²´í¬ë§ˆí¬, ì‹¤íŒ¨ ì‹œ ë¹¨ê°„ìƒ‰ X í‘œì‹œ

---

## ğŸ“Š ì‹¤í–‰ ê²°ê³¼ í™•ì¸

### ë¡œê·¸ í™•ì¸

1. GitHub ì €ì¥ì†Œ > **Actions** íƒ­
2. ì‹¤í–‰ëœ ì›Œí¬í”Œë¡œìš° í´ë¦­
3. ê° ë‹¨ê³„ë¥¼ í´ë¦­í•˜ì—¬ ìƒì„¸ ë¡œê·¸ í™•ì¸

**ì˜ˆì‹œ ë¡œê·¸**:
```
âœ“ í™”ì œ ì¢…ëª© ì¡°íšŒ ì™„ë£Œ
ì¡°íšŒëœ ì¢…ëª© ìˆ˜: 5

ë¸Œë¦¬í•‘ ìƒì„± ì¤‘...
âœ“ ë¸Œë¦¬í•‘ ìƒì„± ì™„ë£Œ
ìƒì„±ëœ ë¸Œë¦¬í•‘ ID: 20251226_070000

âœ“ Slack ë°œì†¡ ì™„ë£Œ
âœ“ Email ë°œì†¡ ì™„ë£Œ

âœ“ ì¼ì¼ ë¸Œë¦¬í•‘ ì›Œí¬í”Œë¡œìš° ì™„ë£Œ
```

### ì•„í‹°íŒ©íŠ¸ ë‹¤ìš´ë¡œë“œ

ìƒì„±ëœ ì´ë¯¸ì§€ ë° JSON íŒŒì¼ì€ 7ì¼ê°„ ë³´ê´€ë©ë‹ˆë‹¤.

**ë‹¤ìš´ë¡œë“œ ë°©ë²•**:
1. ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ í˜ì´ì§€ í•˜ë‹¨ **Artifacts** ì„¹ì…˜
2. `briefing-{ì‹¤í–‰ë²ˆí˜¸}` í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œ

**í¬í•¨ëœ íŒŒì¼**:
- `backend/output/images/*.png` - ë¸Œë¦¬í•‘ ì¹´ë“œ ì´ë¯¸ì§€
- `backend/output/data/*.json` - ì¢…ëª© ë°ì´í„° JSON
- `backend/output/reports/*.txt` - í…ìŠ¤íŠ¸ ë¸Œë¦¬í•‘

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. ì›Œí¬í”Œë¡œìš°ê°€ ì‹¤í–‰ë˜ì§€ ì•Šì„ ë•Œ

**ì›ì¸**: GitHub Actions ê¶Œí•œ ë¬¸ì œ

**í•´ê²°**:
1. ì €ì¥ì†Œ > **Settings** > **Actions** > **General**
2. **Workflow permissions**ë¥¼ **Read and write permissions**ë¡œ ë³€ê²½
3. **Allow GitHub Actions to create and approve pull requests** ì²´í¬

### 2. "Secret not found" ì—ëŸ¬

**ì›ì¸**: GitHub Secrets ë¯¸ë“±ë¡

**í•´ê²°**:
- [í•„ìˆ˜ ì„¤ì •: GitHub Secrets](#-í•„ìˆ˜-ì„¤ì •-github-secrets) ì„¹ì…˜ ì°¸ê³ 
- ëª¨ë“  8ê°œ Secrets ë“±ë¡ í™•ì¸

### 3. Python ëª¨ë“ˆ import ì—ëŸ¬

**ì›ì¸**: ê²½ë¡œ ë¬¸ì œ ë˜ëŠ” ì˜ì¡´ì„± ë¯¸ì„¤ì¹˜

**í•´ê²°**:
```yaml
# ì›Œí¬í”Œë¡œìš°ì— ì´ë¯¸ í¬í•¨ëœ í•´ê²°ì±…
- name: Install dependencies
  run: |
    cd backend
    pip install -r requirements.txt
```

### 4. ì‹œê°„ëŒ€ í™•ì¸

**í•œêµ­ì‹œê°„ ì˜¤ì „ 7ì‹œ = UTC 22ì‹œ (ì „ë‚ )**

Cron í‘œí˜„ì‹ í™•ì¸:
- `0 22 * * *` = UTC 22:00
- í•œêµ­(KST)ì€ UTC+9ì´ë¯€ë¡œ ë‹¤ìŒë‚  07:00ì— ì‹¤í–‰ë¨

**ì‹œê°„ ë³€ê²½ ì˜ˆì‹œ**:
```yaml
# ì˜¤ì „ 8ì‹œë¡œ ë³€ê²½í•˜ë ¤ë©´
- cron: '0 23 * * *'  # UTC 23:00 = KST 08:00

# ì˜¤ì „ 6ì‹œë¡œ ë³€ê²½í•˜ë ¤ë©´
- cron: '0 21 * * *'  # UTC 21:00 = KST 06:00
```

### 5. Email ë°œì†¡ ì‹¤íŒ¨

**ì›ì¸ 1**: Gmail ì•± ë¹„ë°€ë²ˆí˜¸ ë¯¸ì‚¬ìš©
- ì¼ë°˜ ë¹„ë°€ë²ˆí˜¸ê°€ ì•„ë‹Œ **ì•± ë¹„ë°€ë²ˆí˜¸** í•„ìš”
- [Gmail ì•± ë¹„ë°€ë²ˆí˜¸ ìƒì„± ë°©ë²•](#gmail-ì•±-ë¹„ë°€ë²ˆí˜¸-ìƒì„±-ë°©ë²•) ì°¸ê³ 

**ì›ì¸ 2**: 2ë‹¨ê³„ ì¸ì¦ ë¯¸í™œì„±í™”
- Gmailì€ 2ë‹¨ê³„ ì¸ì¦ì´ í•„ìˆ˜
- Google ê³„ì • ë³´ì•ˆ ì„¤ì •ì—ì„œ í™œì„±í™”

**ì›ì¸ 3**: SMTP ì„œë²„/í¬íŠ¸ ì˜¤ë¥˜
```yaml
# Gmail ì„¤ì • í™•ì¸
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_SMTP_PORT=587
```

### 6. Slack ë°œì†¡ ì‹¤íŒ¨

**ì›ì¸**: Webhook URL ì˜¤ë¥˜

**í•´ê²°**:
1. Slack ì›Œí¬ìŠ¤í˜ì´ìŠ¤ > **ì•± ì¶”ê°€** > **Incoming Webhooks**
2. ìƒˆ ì›¹í›… ìƒì„±
3. ìƒì„±ëœ Webhook URL ì „ì²´ë¥¼ ë³µì‚¬í•˜ì—¬ `SLACK_WEBHOOK_URL` Secretì— ë“±ë¡

---

## ğŸ“ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ì‹¤í–‰ ì‹œê°„ ë³€ê²½

```yaml
on:
  schedule:
    # ì˜¤ì „ 8ì‹œë¡œ ë³€ê²½
    - cron: '0 23 * * *'  # UTC 23:00 = KST 08:00

    # ì—¬ëŸ¬ ì‹œê°„ì— ì‹¤í–‰
    - cron: '0 22 * * *'  # ì˜¤ì „ 7ì‹œ
    - cron: '0 4 * * *'   # ì˜¤í›„ 1ì‹œ
```

### ì¢…ëª© ìˆ˜ ë³€ê²½

ì›Œí¬í”Œë¡œìš° íŒŒì¼ì—ì„œ `count` ê°’ ìˆ˜ì •:

```yaml
- name: Get trending stocks
  run: |
    python -c "
    result = TrendingStockService.get_trending_stocks(
        screener_types=['most_actives', 'day_gainers'],
        count=10  # 5 â†’ 10ìœ¼ë¡œ ë³€ê²½
    )
    "
```

### Screener íƒ€ì… ë³€ê²½

```yaml
screener_types=['most_actives', 'day_gainers', 'day_losers']  # 3ê°œ screener ì‚¬ìš©
```

**ì‚¬ìš© ê°€ëŠ¥í•œ Screener**:
- `most_actives` - ê±°ë˜ëŸ‰ ìµœë‹¤
- `day_gainers` - ë‹¹ì¼ ìƒìŠ¹ë¥  ìµœê³ 
- `day_losers` - ë‹¹ì¼ í•˜ë½ë¥  ìµœê³ 

### ë°œì†¡ ì±„ë„ ì„ íƒ

íŠ¹ì • ì±„ë„ë§Œ ì‚¬ìš©í•˜ë ¤ë©´:

**Slackë§Œ ì‚¬ìš©**:
```yaml
- name: Send briefing
  run: |
    from send_briefing import send_to_slack
    send_to_slack()
```

**Emailë§Œ ì‚¬ìš©**:
```yaml
- name: Send briefing
  run: |
    from send_briefing import send_to_email
    send_to_email()
```

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

ì›Œí¬í”Œë¡œìš° ë°°í¬ ì „ í™•ì¸ ì‚¬í•­:

- [ ] GitHub Secrets 8ê°œ ëª¨ë‘ ë“±ë¡ ì™„ë£Œ
- [ ] `requirements.txt`ì— ëª¨ë“  ì˜ì¡´ì„± í¬í•¨ í™•ì¸
- [ ] `.env` íŒŒì¼ êµ¬ì¡° í™•ì¸ (ë¡œì»¬ í…ŒìŠ¤íŠ¸)
- [ ] `backend/daily_briefing_workflow.py` ì¡´ì¬ í™•ì¸
- [ ] `backend/send_briefing.py` ì¡´ì¬ í™•ì¸
- [ ] ìˆ˜ë™ ì‹¤í–‰ìœ¼ë¡œ ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- [ ] ë¡œê·¸ì—ì„œ ëª¨ë“  ë‹¨ê³„ ì„±ê³µ í™•ì¸
- [ ] Slack/Emailì—ì„œ ë¸Œë¦¬í•‘ ìˆ˜ì‹  í™•ì¸
- [ ] Artifactsì—ì„œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ í™•ì¸

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [GitHub Actions ê³µì‹ ë¬¸ì„œ](https://docs.github.com/en/actions)
- [Cron í‘œí˜„ì‹ ìƒì„±ê¸°](https://crontab.guru/)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](í”„ë¡œì íŠ¸_êµ¬ì¡°.md)
- [QUICK_START.md](docs/02_ê°œë°œê°€ì´ë“œ/QUICK_START.md)
- [REST_API_ëª…ì„¸ì„œ.md](docs/02_ê°œë°œê°€ì´ë“œ/REST_API_ëª…ì„¸ì„œ.md)

---

## ğŸ’¡ ìœ ìš©í•œ íŒ

### 1. ë¡œì»¬ì—ì„œ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸

[act](https://github.com/nektos/act) ë„êµ¬ ì‚¬ìš©:
```bash
# act ì„¤ì¹˜ (Windows)
choco install act-cli

# ì›Œí¬í”Œë¡œìš° ë¡œì»¬ ì‹¤í–‰
act workflow_dispatch
```

### 2. Secrets ë³´ì•ˆ

- âŒ ì ˆëŒ€ ì½”ë“œì— ì§ì ‘ API í‚¤ ì‘ì„± ê¸ˆì§€
- âœ… ë°˜ë“œì‹œ GitHub Secrets ì‚¬ìš©
- âœ… `.env` íŒŒì¼ì€ `.gitignore`ì— í¬í•¨

### 3. ë¹„ìš© ì ˆê°

GitHub ActionsëŠ” public ì €ì¥ì†Œì—ì„œ ë¬´ë£Œì´ì§€ë§Œ, private ì €ì¥ì†ŒëŠ” ì›” 2,000ë¶„ ì œí•œ:
- ì›Œí¬í”Œë¡œìš° ìµœì í™”ë¡œ ì‹¤í–‰ ì‹œê°„ ë‹¨ì¶•
- ë¶ˆí•„ìš”í•œ ë‹¨ê³„ ì œê±°
- ìºì‹± í™œìš© (pip cache ì´ë¯¸ ì ìš©ë¨)

### 4. ì•Œë¦¼ ê°œì„ 

ì›Œí¬í”Œë¡œìš° ì‹¤íŒ¨ ì‹œ Slack/Email ì•Œë¦¼:
```yaml
- name: Notify failure
  if: failure()
  run: |
    curl -X POST ${{ secrets.SLACK_WEBHOOK_URL }} \
      -H 'Content-Type: application/json' \
      -d '{"text":"âš ï¸ ì¼ì¼ ë¸Œë¦¬í•‘ ìƒì„± ì‹¤íŒ¨!"}'
```

---

**ì‘ì„±ì**: Claude Code
**ìƒíƒœ**: âœ… ì„¤ì • ì™„ë£Œ
**ë‹¤ìŒ ë‹¨ê³„**: GitHub Secrets ë“±ë¡ í›„ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
